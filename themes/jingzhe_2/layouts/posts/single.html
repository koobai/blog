{{ define "body_classes" }}page-blog-single{{ end }}
{{ define "main" }} 
<div class="single-nrong">
  <div class="single-zw">
    
    <article class="article_details">
      <h1 class="article_details_title">{{ .Title }}</h1>
      {{ with .Params.image }}
      <img src="{{ . | relURL }}" class="top-img img-hide" alt="{{ $.Title }}" />
      {{ end }}
    </article>

    <div class="content_zhengwen">
      <div class="content">
        {{ .Content }}
      </div>
      
      <div class="single-biaoq">
        <div class="page-time twitter-time" data-time="{{ .Date.Unix }}"></div>
        <div class="single-tag">
           {{ with .GetTerms "tags" }}
                {{ range . }}
           <div class="single-tag-c">#<a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a></div>
                {{ end }}
           {{ end }}
        </div>
      </div> 
    </div>

   <div class="archives_nrong" >
    {{/* 上一篇 */}}
    {{ with .PrevInSection }}
      <div class="archives_one">
        <div>
          <div class="archive-title"><a href="{{ .RelPermalink }}">{{ .Title }}</a></div>
          <div class="archive-time twitter-time" data-time="{{ .Date.Unix }}"></div>  
        </div>
        {{/* 2. 只有当上一篇有图片时，才渲染图片区域 */}}
        {{ if .Params.image }}
        <div class="archive-img">
          <a href="{{ .RelPermalink }}"><img loading="lazy" decoding="async" src="{{ .Params.image | relURL }}" alt="{{ .Title }}" /></a>          
        </div>
        {{ end }}
      </div>
    {{ end }}
    
    {{/* 下一篇 或 随机推荐 */}}
    {{ with .NextInSection }}
      <div class="archives_one">
        <div>
          <div class="archive-title"><a href="{{ .RelPermalink }}">{{ .Title }}</a></div>
          <div class="archive-time twitter-time" data-time="{{ .Date.Unix }}"></div>  
        </div>
        {{ if .Params.image }}
        <div class="archive-img">
          <a href="{{ .RelPermalink }}"><img loading="lazy" decoding="async" src="{{ .Params.image | relURL }}" alt="{{ .Title }}" /></a>          
        </div>
        {{ end }}
      </div>
    {{ else }}
      {{ $pages := where site.RegularPages "Type" "posts" }}
      {{ $pages = where $pages "Permalink" "ne" .Permalink }}
      {{ with first 1 ($pages | shuffle) }}
        {{ range . }}
        <div class="archives_one">
          <div>
            <div class="archive-title"><a href="{{ .RelPermalink }}">{{ .Title }}</a></div>
            <div class="archive-time twitter-time" data-time="{{ .Date.Unix }}"></div> 
          </div>
          {{ if .Params.image }}
          <div class="archive-img">
            <a href="{{ .RelPermalink }}"><img loading="lazy" decoding="async" src="{{ .Params.image | relURL }}" alt="{{ .Title }}" /></a>          
          </div>
          {{ end }}
        </div>
        {{ end }}
      {{ end }}
    {{ end }}

    <button type="button" 
     onclick="const r=document.referrer; r&&r.includes(window.location.host)?history.back():window.location.href='/'" 
     class="fanhui" title="哪来回哪去" aria-label="返回上一页" data-umami-event="Fanhui">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M2.614 5.426A1.5 1.5 0 0 1 4 4.5h10a7.5 7.5 0 1 1 0 15H5a1.5 1.5 0 0 1 0-3h9a4.5 4.5 0 1 0 0-9H7.621l.94.94a1.5 1.5 0 0 1-2.122 2.12l-3.5-3.5a1.5 1.5 0 0 1-.325-1.634Z" fill="currentColor"/>
      </svg>
    </button>
  </div>

  <div id="MoreComments" onclick="loadComments()">评论一下 ...</div>
  <div class="article-comments" id="articlecomments" style="display: none;">
    {{- partial "artalk" . -}}
  </div> 

  </div> 
  
  <div>
      {{ if .TableOfContents }}
      <div class="paragraph-dh">
       {{ .TableOfContents }}
      </div>
      {{ end }}
  </div>

</div>
<script src="/js/single.js"></script>    
{{ end }}