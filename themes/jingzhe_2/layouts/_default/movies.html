{{ define "body_classes" }}page-movies{{ end }}
{{ define "main" }}
<div class="pagetitle">自己很喜欢观影，在能力范围内会把显示、音响、播放等设备添置得最好，然后静静的欣赏一部电影一集电视一个故事一段人生～～，沉浸其中体验不同的酸甜苦辣。以下海报墙为已观看或正在追的过程中 ( 数据来源于豆瓣 )～～</div>
  
<div id="movies_page">
  {{ $movies := resources.Get "movie.csv" | transform.Unmarshal }}
  
  {{ range $idx, $movie := after 1 $movies }}
      
      {{ $yingshiimg := printf "https://img.koobai.com/douban/%s.webp" (path.Base (strings.TrimSuffix ".jpg" (index $movie 3))) }}
      {{ $rating := index $movie 8 }}
      
      <div class="movies_bankuai img-hide">
          <a href="{{index $movie 5}}" target="_blank" rel="noopener noreferrer">
              <img class="avatar" width="270" height="400" referrerpolicy="no-referrer" decoding="async" src="{{ $yingshiimg }}" loading="lazy" alt="{{ index $movie 1 }}">
          </a>
          
          <div class="movies-nrong">
            <div class="movie-title">
                <a href="{{index $movie 5}}" target="_blank" rel="noopener noreferrer">{{index $movie 1}}</a>
            </div>
            
            <div class="movie-pfeng" aria-label="评分：{{ $rating }} 星">
              {{ with $rating }}
                {{ $ratingCount := int . }}
                {{ range $i := seq $ratingCount }}
                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M10.788 3.102c.495-1.003 1.926-1.003 2.421 0l2.358 4.778l5.273.766c1.107.16 1.549 1.522.748 2.303l-3.816 3.719l.901 5.25c.19 1.104-.968 1.945-1.959 1.424l-4.716-2.48l-4.715 2.48c-.99.52-2.148-.32-1.96-1.423l.901-5.251l-3.815-3.72c-.801-.78-.359-2.141.748-2.302L8.43 7.88z"/></svg>
                {{ end }}
              {{ end }}
            </div>
            
            <div class="movie-info">{{index $movie 9}}</div>
            
            <div class="movie-time twitter-time" data-time="{{ index $movie 11 }}"></div>
          </div>
      </div>
  {{ end }}
</div> 
 
{{ if gt (len $movies) 28 }}
  <div id="movies_loadMore" class="movies_loadMore">看更多...</div>
{{ end }}
<script src="/js/movies.js?v=20160131"></script>
{{ end }}